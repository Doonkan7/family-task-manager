/* –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è E2E —Ç–µ—Å—Ç–æ–≤
 * –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
 */

// import { expect } from '@playwright/test' // –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
import path from 'path'

/**
 * –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
 */
export class AuthHelpers {
  constructor(page) {
    this.page = page
  }

  /**
   * –í—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
   * @param {string} email - Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   * @param {string} password - –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   */
  async login(email, password) {
    await this.page.goto('/')
    
    // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
    await this.page.waitForSelector('input[type="email"]')
    
    // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É
    await this.page.fill('input[type="email"]', email)
    await this.page.fill('input[type="password"]', password)
    
    // –ù–∞–∂–∏–º–∞–µ–º –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥–∞
    await this.page.click('button:has-text("–í–æ–π—Ç–∏")')
    
    // –ñ–¥–µ–º —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞
    await this.page.waitForSelector('text="Family Task Manager"', { timeout: 10000 })
  }

  /**
   * –í—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   * @param {Object} userData - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   */
  async register(userData) {
    await this.page.goto('/')
    
    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
    await this.page.click('text="–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å"')
    
    // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    await this.page.fill('input[type="email"]', userData.email)
    await this.page.fill('input[type="password"]', userData.password)
    
    if (userData.phone) {
      await this.page.fill('input[type="tel"]', userData.phone)
    }
    
    if (userData.role) {
      await this.page.selectOption('select', userData.role)
    }
    
    if (userData.familyCode) {
      await this.page.fill('input[placeholder*="–∫–æ–¥ —Å–µ–º—å–∏"]', userData.familyCode)
    }
    
    // –ù–∞–∂–∏–º–∞–µ–º –∫–Ω–æ–ø–∫—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    await this.page.click('button:has-text("–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è")')
    
    // –ñ–¥–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    await this.page.waitForSelector('text="–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞"', { timeout: 10000 })
  }

  /**
   * –í—ã–ø–æ–ª–Ω—è–µ—Ç –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
   */
  async logout() {
    await this.page.click('button:has-text("üö™ –í—ã–π—Ç–∏")')
    
    // –ñ–¥–µ–º –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
    await this.page.waitForSelector('text="–í—Ö–æ–¥"', { timeout: 5000 })
  }
}

/**
 * –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏
 */
export class TaskHelpers {
  constructor(page) {
    this.page = page
  }

  /**
   * –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É (–¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π)
   * @param {Object} taskData - –î–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
   */
  async createTask(taskData) {
    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    await this.page.click('button:has-text("üëë –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ")')
    
    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –≤–∫–ª–∞–¥–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
    await this.page.click('button:has-text("‚ûï –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É")')
    
    // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É
    await this.page.fill('input[placeholder*="–Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"]', taskData.title)
    
    if (taskData.description) {
      await this.page.fill('textarea[placeholder*="–æ–ø–∏—Å–∞–Ω–∏–µ"]', taskData.description)
    }
    
    if (taskData.assignedTo) {
      await this.page.selectOption('select', taskData.assignedTo)
    }
    
    if (taskData.priority) {
      await this.page.selectOption('select', taskData.priority)
    }
    
    if (taskData.dueDate) {
      await this.page.fill('input[type="datetime-local"]', taskData.dueDate)
    }
    
    // –ó–∞–ø–æ–ª–Ω—è–µ–º –Ω–∞–≥—Ä–∞–¥—ã
    if (taskData.reward) {
      if (taskData.reward.stars) {
        await this.page.fill('input[type="number"]', taskData.reward.stars.toString())
      }
      if (taskData.reward.money) {
        await this.page.fill('input[step="0.01"]', taskData.reward.money.toString())
      }
      if (taskData.reward.screenTime) {
        await this.page.fill('input[type="number"]:nth-of-type(3)', taskData.reward.screenTime.toString())
      }
    }
    
    // –°–æ–∑–¥–∞–µ–º –∑–∞–¥–∞—á—É
    await this.page.click('button:has-text("–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É")')
    
    // –ñ–¥–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    await this.page.waitForSelector('text="–ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞"', { timeout: 5000 })
  }

  /**
   * –ù–∞—á–∏–Ω–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (–¥–ª—è –¥–µ—Ç–µ–π)
   * @param {string} taskTitle - –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
   */
  async startTask(taskTitle) {
    // –ù–∞—Ö–æ–¥–∏–º –∑–∞–¥–∞—á—É –∏ –Ω–∞–∂–∏–º–∞–µ–º "–ù–∞—á–∞—Ç—å"
    const taskCard = this.page.locator(`text="${taskTitle}"`).locator('..').locator('..')
    await taskCard.locator('button:has-text("–ù–∞—á–∞—Ç—å")').click()
    
    // –ñ–¥–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
    await this.page.waitForSelector('text="–í –ø—Ä–æ—Ü–µ—Å—Å–µ"', { timeout: 5000 })
  }

  /**
   * –ó–∞–≤–µ—Ä—à–∞–µ—Ç –∑–∞–¥–∞—á—É —Å —Ñ–æ—Ç–æ-–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º
   * @param {string} taskTitle - –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
   * @param {string} imagePath - –ü—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   */
  async completeTaskWithPhoto(taskTitle, imagePath = null) {
    const taskCard = this.page.locator(`text="${taskTitle}"`).locator('..').locator('..')
    
    // –ù–∞–∂–∏–º–∞–µ–º "–ó–∞–≤–µ—Ä—à–∏—Ç—å"
    await taskCard.locator('button:has-text("–ó–∞–≤–µ—Ä—à–∏—Ç—å")').click()
    
    if (imagePath) {
      // –ñ–¥–µ–º –ø–æ—è–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –∑–∞–≥—Ä—É–∑–∫–∏
      await this.page.waitForSelector('text="–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ-–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ"')
      
      // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª
      const fileInput = this.page.locator('input[type="file"]')
      await fileInput.setInputFiles(imagePath)
      
      // –ñ–¥–µ–º preview
      await this.page.waitForSelector('img[alt="Preview"]')
      
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º
      await this.page.click('button:has-text("–û—Ç–ø—Ä–∞–≤–∏—Ç—å")')
    } else {
      // –ó–∞–≤–µ—Ä—à–∞–µ–º –±–µ–∑ —Ñ–æ—Ç–æ
      await taskCard.locator('button:has-text("–ë–µ–∑ —Ñ–æ—Ç–æ")').click()
    }
    
    // –ñ–¥–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
    await this.page.waitForSelector('text="–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ"', { timeout: 5000 })
  }

  /**
   * –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∑–∞–¥–∞—á—É (–¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π)
   * @param {string} taskTitle - –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
   */
  async confirmTask(taskTitle) {
    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ"
    await this.page.click('button:has-text("‚è≥ –ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ")')
    
    // –ù–∞—Ö–æ–¥–∏–º –∑–∞–¥–∞—á—É –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º
    const taskCard = this.page.locator(`text="${taskTitle}"`).locator('..').locator('..')
    await taskCard.locator('button:has-text("‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å")').click()
    
    // –ñ–¥–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞
    await this.page.waitForTimeout(1000)
  }

  /**
   * –û—Ç–∫–ª–æ–Ω—è–µ—Ç –∑–∞–¥–∞—á—É —Å –ø—Ä–∏—á–∏–Ω–æ–π (–¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π)
   * @param {string} taskTitle - –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
   * @param {string} reason - –ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
   */
  async rejectTask(taskTitle, reason) {
    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ"
    await this.page.click('button:has-text("‚è≥ –ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ")')
    
    // –ù–∞—Ö–æ–¥–∏–º –∑–∞–¥–∞—á—É
    const taskCard = this.page.locator(`text="${taskTitle}"`).locator('..').locator('..')
    
    // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø—Ä–∏—á–∏–Ω—É –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
    await taskCard.locator('textarea[placeholder*="–ø—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è"]').fill(reason)
    
    // –û—Ç–∫–ª–æ–Ω—è–µ–º
    await taskCard.locator('button:has-text("‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å")').click()
    
    // –ñ–¥–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞
    await this.page.waitForTimeout(1000)
  }
}

/**
 * –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ–º—å–µ–π
 */
export class FamilyHelpers {
  constructor(page) {
    this.page = page
  }

  /**
   * –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Å–µ–º—å—é
   * @returns {string} –ö–æ–¥ —Å–µ–º—å–∏
   */
  async createFamily() {
    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø—Ä–æ—Ñ–∏–ª—å
    await this.page.click('button:has-text("üë§ –ü—Ä–æ—Ñ–∏–ª—å")')
    
    // –°–æ–∑–¥–∞–µ–º —Å–µ–º—å—é
    await this.page.click('button:has-text("–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–µ–º—å—é")')
    
    // –ñ–¥–µ–º alert —Å –∫–æ–¥–æ–º —Å–µ–º—å–∏
    const alertPromise = this.page.waitForEvent('dialog')
    const dialog = await alertPromise
    const message = dialog.message()
    
    // –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–æ–¥ —Å–µ–º—å–∏ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
    const familyCodeMatch = message.match(/–∫–æ–¥ —Å–µ–º—å–∏: (.+)$/i)
    const familyCode = familyCodeMatch ? familyCodeMatch[1] : null
    
    await dialog.accept()
    
    return familyCode
  }

  /**
   * –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–µ–º—å–µ
   * @param {string} familyCode - –ö–æ–¥ —Å–µ–º—å–∏
   */
  async joinFamily(familyCode) {
    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø—Ä–æ—Ñ–∏–ª—å
    await this.page.click('button:has-text("üë§ –ü—Ä–æ—Ñ–∏–ª—å")')
    
    // –í–≤–æ–¥–∏–º –∫–æ–¥ —Å–µ–º—å–∏
    await this.page.fill('input[placeholder*="–∫–æ–¥ —Å–µ–º—å–∏"]', familyCode)
    
    // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º—Å—è
    await this.page.click('button:has-text("–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è")')
    
    // –ñ–¥–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    await this.page.waitForSelector('text="—É—Å–ø–µ—à–Ω–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª–∏—Å—å"', { timeout: 5000 })
  }

  /**
   * –ü–æ–∫–∏–¥–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Å–µ–º—å—é
   */
  async leaveFamily() {
    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø—Ä–æ—Ñ–∏–ª—å
    await this.page.click('button:has-text("üë§ –ü—Ä–æ—Ñ–∏–ª—å")')
    
    // –ù–∞–∂–∏–º–∞–µ–º –ø–æ–∫–∏–Ω—É—Ç—å —Å–µ–º—å—é
    const confirmPromise = this.page.waitForEvent('dialog')
    await this.page.click('button:has-text("–ü–æ–∫–∏–Ω—É—Ç—å —Å–µ–º—å—é")')
    
    // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –≤ –¥–∏–∞–ª–æ–≥–µ
    const dialog = await confirmPromise
    await dialog.accept()
    
    // –ñ–¥–µ–º —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π —Å–µ–º—å–∏
    await this.page.waitForSelector('text="—Å–æ–∑–¥–∞–ª–∏ –Ω–æ–≤—É—é —Å–µ–º—å—é"', { timeout: 5000 })
  }
}

/**
 * –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏
 */
export class FileHelpers {
  /**
   * –°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
   * @param {string} filename - –ò–º—è —Ñ–∞–π–ª–∞
   * @returns {string} –ü—É—Ç—å –∫ —Å–æ–∑–¥–∞–Ω–Ω–æ–º—É —Ñ–∞–π–ª—É
   */
  static createTestImage(filename = 'test-image.jpg') {
    // –í —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
    // –î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Ç—å –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É —Ñ–∞–π–ª—É
    return path.join(process.cwd(), 'playwright-tests', 'fixtures', filename)
  }

  /**
   * –û—á–∏—â–∞–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
   */
  static async cleanupUploads() {
    // –õ–æ–≥–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–æ–≤ —Ñ–∞–π–ª–æ–≤
    console.log('–û—á–∏—Å—Ç–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤...')
  }
}

/**
 * –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏–π –∏ –ø—Ä–æ–≤–µ—Ä–æ–∫
 */
export class WaitHelpers {
  constructor(page) {
    this.page = page
  }

  /**
   * –ñ–¥–µ—Ç –ø–æ—è–≤–ª–µ–Ω–∏—è toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   * @param {string} message - –û–∂–∏–¥–∞–µ–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
   */
  async waitForToast(message) {
    await this.page.waitForSelector(`text="${message}"`, { timeout: 5000 })
  }

  /**
   * –ñ–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   */
  async waitForPageLoad() {
    await this.page.waitForLoadState('networkidle')
    await this.page.waitForSelector('body')
  }

  /**
   * –ñ–¥–µ—Ç –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏
   */
  async waitForLoadingToFinish() {
    await this.page.waitForSelector('text="–ó–∞–≥—Ä—É–∑–∫–∞"', { state: 'hidden', timeout: 10000 })
  }
}

/**
 * –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –∏ –æ—Ç–ª–∞–¥–∫–∏
 */
export class DebugHelpers {
  constructor(page) {
    this.page = page
  }

  /**
   * –î–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   * @param {string} name - –ò–º—è —Ñ–∞–π–ª–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞
   */
  async screenshot(name) {
    await this.page.screenshot({ 
      path: `playwright-report/screenshots/${name}.png`,
      fullPage: true 
    })
  }

  /**
   * –í—ã–≤–æ–¥–∏—Ç HTML —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   */
  async logPageHTML() {
    const html = await this.page.content()
    console.log('Page HTML:', html)
  }

  /**
   * –í—ã–≤–æ–¥–∏—Ç –∫–æ–Ω—Å–æ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   */
  async logConsole() {
    this.page.on('console', msg => {
      console.log('Browser console:', msg.text())
    })
  }
}
