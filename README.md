# Family Task Manager

React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–º–µ–π–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Supabase.

## üß™ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï –ü–†–ê–í–ò–õ–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

**‚ö†Ô∏è –í–ê–ñ–ù–û**: –î–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–∏—Å–∞–Ω–∏–µ –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –∏—Ç–æ–≥—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞.

üìã [–ü–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](./docs/TESTING_RULES.md)

### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
npm run test:all

# –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
npm run test:coverage

# E2E —Ç–µ—Å—Ç—ã
npm run test:e2e
```

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **React + Vite** - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- **Supabase** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **TailwindCSS** - —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- **Vitest** - unit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Playwright** - E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

# Family Task Manager ‚Äî Supabase Setup

–ù–∏–∂–µ ‚Äî –±—ã—Å—Ç—Ä—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase (—Ñ—É–Ω–∫—Ü–∏—è-—Ç—Ä–∏–≥–≥–µ—Ä –∏ RLS –ø–æ–ª–∏—Ç–∏–∫–∏), –∫–æ—Ç–æ—Ä—ã–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–º—å—è–º–∏.

## 1) –ü—Ä–∏–º–µ–Ω–∏—Ç—å SQL-—Å–∫—Ä–∏–ø—Ç

–í –ø—Ä–æ–µ–∫—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω —Ñ–∞–π–ª `scripts/supabase_policies.sql`. –û–Ω:

- —Å–æ–∑–¥–∞—ë—Ç –±–µ–∑–æ–ø–∞—Å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é-—Ç—Ä–∏–≥–≥–µ—Ä `public.handle_new_user()` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ `auth.users` ‚Üí `public.users` –±–µ–∑ –∂—ë—Å—Ç–∫–æ–≥–æ –ø—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è `family_id`;
- –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã `public.users` (—É–±–∏—Ä–∞–µ—Ç `UNIQUE(email)` –∏ –¥–æ–ø—É—Å–∫–∞–µ—Ç `NULL` –≤ `family_id`);
- –≤–∫–ª—é—á–∞–µ—Ç –∏ —Å–æ–∑–¥–∞—ë—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ RLS‚Äë–ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è `public.families` –∏ `public.users`;
- –æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –Ω–∞ `auth.users`.

–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase ‚Üí SQL Editor.
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `scripts/supabase_policies.sql` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ.
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—à–∏–±–æ–∫ –Ω–µ—Ç. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –¥–æ–ø—É—Å—Ç–∏–º (—Å–∫—Ä–∏–ø—Ç –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–µ–Ω –ø–æ –º–∞–∫—Å–∏–º—É–º—É).

## 2) –ü–æ—Ç–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å email –∏ –ø–∞—Ä–æ–ª–µ–º.
- –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞—ë—Ç/–Ω–∞—Ö–æ–¥–∏—Ç —Å–µ–º—å—é –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç `users.family_id` –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ (—Å–º. `src/App.jsx`, `ensureProfile`).
- –≠—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç RLS‚Äë–æ—à–∏–±–∫–∏ –ø—Ä–∏ signup –∏ –¥–µ–ª–∞–µ—Ç –ø–æ—Ç–æ–∫ —Å—Ç–∞–±–∏–ª—å–Ω—ã–º.

## 3) –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
npm install
npm run dev
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `VITE_SUPABASE_URL` –∏ `VITE_SUPABASE_ANON_KEY` –∑–∞–¥–∞–Ω—ã –≤ `.env`.

## 4) –ü–æ–ª–µ–∑–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Supabase (—Ñ—É–Ω–∫—Ü–∏–∏/–ø–æ–ª–∏—Ç–∏–∫–∏) –Ω–µ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Git, –ø–æ—ç—Ç–æ–º—É SQL‚Äë—Å–∫—Ä–∏–ø—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `scripts/` –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∑–¥–µ—Å—å.
- –ï—Å–ª–∏ —É –≤–∞—Å –≤–∫–ª—é—á–µ–Ω—ã pre-commit —Ö—É–∫–∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--no-verify`.

